{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Desktop\\\\stripe-sample-code\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nconst ProductDisplay = ({\n  handleCheckout\n}) => /*#__PURE__*/React.createElement(\"section\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 5,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"product\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 6,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"description\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 8,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(\"h3\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 9,\n    columnNumber: 9\n  }\n}, \"Starter plan\"), /*#__PURE__*/React.createElement(\"h5\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 9\n  }\n}, \"$20.00 / month\"))), /*#__PURE__*/React.createElement(\"button\", {\n  onClick: handleCheckout,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 5\n  }\n}, \"Checkout\"));\nconst SuccessDisplay = ({\n  sessionId,\n  handleManageBilling\n}) => /*#__PURE__*/React.createElement(\"section\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 20,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"product Box-root\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"description Box-root\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 7\n  }\n}, /*#__PURE__*/React.createElement(\"h3\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 9\n  }\n}, \"Subscription to starter plan successful!\"))), /*#__PURE__*/React.createElement(\"button\", {\n  onClick: () => handleManageBilling(sessionId),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }\n}, \"Manage your billing information\"));\nconst Message = ({\n  message\n}) => /*#__PURE__*/React.createElement(\"section\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 34,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"p\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }\n}, message));\nexport default function App() {\n  let [message, setMessage] = useState('');\n  let [success, setSuccess] = useState(false);\n  let [sessionId, setSessionId] = useState('');\n  const handleCheckout = async () => {\n    console.log(\"hello\");\n    try {\n      const formData = new FormData();\n      formData.append('price_id', 'price_1P9PtlK6Mh3He5TZfHyYlpxq'); // Replace with actual lookup key\n\n      const response = await fetch('http://localhost:8000/create-checkout-session', {\n        method: 'POST',\n        body: formData\n      });\n      console.log(\"hello\", response);\n      const data = await response.json();\n      console.log(data);\n      window.location.href = data.sessionId.url;\n    } catch (error) {\n      console.error('Error creating checkout session:', error);\n      setMessage('Error creating checkout session. Please try again later.');\n    }\n  };\n  useEffect(() => {\n    // console.log(window.location.origin+window.location.pathname+window.location.search)\n    const url = new URL(window.location.origin + window.location.pathname + window.location.search);\n    const params = new URLSearchParams(url.search);\n    console.log(params);\n    console.log(params);\n    if (params.get('session_id')) {\n      setSuccess(true);\n      setSessionId(params.get('session_id'));\n    }\n    if (params.get('canceled')) {\n      setSuccess(false);\n      setMessage(\"Order canceled -- continue to shop around and checkout when you're ready.\");\n    }\n  }, [sessionId]);\n  const handleManageBilling = async sessionId => {\n    try {\n      const formData = new FormData();\n      formData.append('session_id', sessionId);\n      const response = await fetch('http://localhost:8000/create-portal-session', {\n        method: 'POST',\n        body: formData\n      });\n      const data = await response.json();\n      window.location.href = data.url;\n    } catch (error) {\n      console.error('Error creating portal session:', error);\n      setMessage('Error creating portal session. Please try again later.');\n    }\n  };\n  if (!success && message === '') {\n    return /*#__PURE__*/React.createElement(ProductDisplay, {\n      handleCheckout: handleCheckout,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 12\n      }\n    });\n  } else if (success && sessionId !== '') {\n    return /*#__PURE__*/React.createElement(SuccessDisplay, {\n      sessionId: sessionId,\n      handleManageBilling: handleManageBilling,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 12\n      }\n    });\n  } else {\n    return /*#__PURE__*/React.createElement(Message, {\n      message: message,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 12\n      }\n    });\n  }\n}","map":{"version":3,"names":["React","useState","useEffect","ProductDisplay","handleCheckout","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","SuccessDisplay","sessionId","handleManageBilling","Message","message","App","setMessage","success","setSuccess","setSessionId","console","log","formData","FormData","append","response","fetch","method","body","data","json","window","location","href","url","error","URL","origin","pathname","search","params","URLSearchParams","get"],"sources":["C:/Users/hp/Desktop/stripe-sample-code/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nconst ProductDisplay = ({ handleCheckout }) => (\n  <section>\n    <div className=\"product\">\n      {/* <Logo /> */}\n      <div className=\"description\">\n        <h3>Starter plan</h3>\n        <h5>$20.00 / month</h5>\n      </div>\n    </div>\n    <button onClick={handleCheckout}>\n      Checkout\n    </button>\n  </section>\n);\n\nconst SuccessDisplay = ({ sessionId, handleManageBilling }) => (\n  <section>\n    <div className=\"product Box-root\">\n      {/* <Logo /> */}\n      <div className=\"description Box-root\">\n        <h3>Subscription to starter plan successful!</h3>\n      </div>\n    </div>\n    <button onClick={() => handleManageBilling(sessionId)}>\n      Manage your billing information\n    </button>\n  </section>\n);\n\nconst Message = ({ message }) => (\n  <section>\n    <p>{message}</p>\n  </section>\n);\n\nexport default function App() {\n  let [message, setMessage] = useState('');\n  let [success, setSuccess] = useState(false);\n  let [sessionId, setSessionId] = useState('');\n\n  const handleCheckout = async () => {\n    console.log(\"hello\")\n    try {\n      const formData = new FormData();\n      formData.append('price_id','price_1P9PtlK6Mh3He5TZfHyYlpxq' ); // Replace with actual lookup key\n  \n      const response = await fetch('http://localhost:8000/create-checkout-session', {\n        method: 'POST',\n        body: formData\n      });\n\n      console.log(\"hello\",response)\n      \n  \n      const data = await response.json();\n      \n      console.log(data)\n      window.location.href = data.sessionId.url;\n    } catch (error) {\n      console.error('Error creating checkout session:', error);\n      setMessage('Error creating checkout session. Please try again later.');\n    }\n  };\n\n  useEffect(() => {\n    // console.log(window.location.origin+window.location.pathname+window.location.search)\n    const url = new URL(window.location.origin+window.location.pathname+window.location.search);\n    const params = new URLSearchParams(url.search);\n\n  console.log(params);\n\n    console.log(params)\n  \n    if (params.get('session_id')) {\n      setSuccess(true);\n      setSessionId(params.get('session_id'));\n    }\n\n    if (params.get('canceled')) {\n      setSuccess(false);\n      setMessage(\n        \"Order canceled -- continue to shop around and checkout when you're ready.\"\n      );\n    }\n  }, [sessionId]);\n\n \n  \n\n  const handleManageBilling = async (sessionId) => {\n    try {\n      const formData = new FormData();\n      formData.append('session_id', sessionId);\n      const response = await fetch('http://localhost:8000/create-portal-session', {\n        method: 'POST',\n        body: formData\n      });\n      const data = await response.json();\n      window.location.href = data.url;\n    } catch (error) {\n      console.error('Error creating portal session:', error);\n      setMessage('Error creating portal session. Please try again later.');\n    }\n  };\n\n  if (!success && message === '') {\n    return <ProductDisplay handleCheckout={handleCheckout} />;\n  } else if (success && sessionId !== '') {\n    return <SuccessDisplay sessionId={sessionId} handleManageBilling={handleManageBilling} />;\n  } else {\n    return <Message message={message} />;\n  }\n}\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}